<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <div>
            <h3>{{sessionData.testDescription}}</h3>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <div class="mb-3">
            <h5 class="text-uppercase">Respondent</h5>
            <div class="d-flex" *ngFor="let field of respondent">
              <i class="bx bx-info-square fs-4 p-1"></i><span class="p-1">{{field.id}}: </span><span
                class="p-1 fw-bold">{{field.fieldValue}}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="card">
        <div class="card-body">
          <div class="mb-3">
            <h5 class="text-uppercase">Summary</h5>
            <div>
              <p [innerHTML]="afterTestConfig?.testEndConfig?.message"></p>
              <ng-container *ngIf="showPassFailMessage">
                <p *ngIf="passMarkGrading?.passMarkGrade?.isPass; else failMessage"
                  [innerHTML]="afterTestConfig?.informRespondentConfig?.passedMessage"></p>
                <ng-template #failMessage>
                  <p [innerHTML]="afterTestConfig?.informRespondentConfig?.failedMessage"></p>
                </ng-template>
              </ng-container>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row justify-content-center">
    <div class="col-lg-6">
      <div class="card">
        <div class="card-body">
          <div class="row mb-3">
            <h4 class="text-uppercase">Result</h4>
            <div class="col-xl-6" *ngIf="passMarkGrading">
              <div class="d-flex pass" *ngIf="passMarkGrading.passMarkGrade?.isPass; else fail">
                <i class="bx bxs-check-square fs-3"></i>
                <h5>Test passed</h5>
              </div>
              <ng-template #fail>
                <div class="d-flex fail">
                  <i class="bx bxs-x-square fs-3"></i>
                  <h5>Test failed</h5>
                </div>
              </ng-template>
            </div>
            <div class="col-xl-6" *ngIf="gradeRangesValues">
              <div class="d-flex">
                <h5>Grade</h5>
              </div>
              <div class="d-flex" *ngFor="let value of gradeRangesValues">
                <span>{{value}}</span>
              </div>
            </div>
            <div class="col-xl-6">
              <div id="chart">
                <apx-chart *ngIf="chartOptions" [series]="chartOptions.series" [chart]="chartOptions.chart"
                  [plotOptions]="chartOptions.plotOptions" [labels]="chartOptions.labels" [stroke]="chartOptions.stroke"
                  [fill]="chartOptions.fill" [colors]="chartOptions.colors"></apx-chart>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-lg-6">
      <div class="card">
        <div class="card-body">
          <div class="mb-3">
            <h4 class="text-uppercase">Timer</h4>
            <div>
              <h5>Total time</h5>
              <div class="row mb-3">
                <div class="d-flex fs-3">
                  <span class="fw-bold">{{totalTime | formatTimeSpan}}</span><span>/</span><span
                    class="opacity-75">{{maxTime | formatTimeSpan}}</span>
                </div>
              </div>
              <h5>Start time</h5>
              <div class="row mb-3">
                <div class="d-flex fs-3">
                  <span class="fw-bold">{{sessionData.startTime | formatLocalDateTime}}</span>
                </div>
              </div>
              <h5>End time</h5>
              <div class="row" mb-3>
                <div class="d-flex fs-3">
                  <span class="fw-bold">{{sessionData.endTime | formatLocalDateTime}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="card" *ngIf="showCorrectAnswers">
    <div class="card-body">
      <div class="mb-3">
        <h5 class="text-uppercase">Answers</h5>
      </div>
      <ng-container *ngFor="let question of questions; let i = index">
        <div class="row" *ngIf="question">
          <div class="d-flex mb-2">
            <div class="flex-shrink-0 me-3">
              <h4>#{{i+1}}</h4>
              <h5 class="mb-1 fs-15"><a [routerLink]="[question.id]" class="text-dark" [innerHTML]="question.description"></a></h5>
            </div>
          </div>
          <div class="d-flex mb-2" *ngIf="question.answerType === 1">
            <div class="flex-grow-1">
              <div *ngFor="let answer of question.questionAnswers" [ngClass]="{'bg-light': answer.isCorrect}">
                <div class="form-check form-radio-outline form-radio-secondary mb-3">
                  <ng-container *ngIf="answersDictionary[question.id!][answer.id!]; else blank">
                    <i *ngIf="answer.isCorrect; else incorrect" class="ri-checkbox-circle-line text-success"></i>
                    <ng-template #incorrect>
                      <i class="ri-close-circle-line text-danger"></i>
                    </ng-template>
                  </ng-container>
                  <ng-template #blank>
                    <i class="ri-checkbox-blank-circle-line"></i>
                  </ng-template>
                  <label class="form-check-label ml-1">
                    {{answer.answerDescription}}
                  </label>
                </div>
              </div>
            </div>
          </div>
          <div class="d-flex mb-2" *ngIf="question.answerType === 2">
            <div class="flex-grow-1">
              <div *ngFor="let answer of question.questionAnswers"  [ngClass]="{'bg-light': answer.isCorrect}">
                <div class="form-check form-check-outline form-check-primary mb-3">
                  <ng-container *ngIf="answersDictionary[question.id!][answer.id!]; else checkboxBlank">
                    <i *ngIf="answer.isCorrect; else incorrect" class="ri-checkbox-line text-success"></i>
                    <ng-template #incorrect>
                      <i class="ri-checkbox-line text-danger"></i>
                    </ng-template>
                  </ng-container>
                  <ng-template #checkboxBlank>
                    <i class="ri-checkbox-blank-line"></i>
                  </ng-template>
                  <label class="form-check-label" for="formCheck13">
                    {{answer.answerDescription}}
                  </label>
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr *ngIf="i < questions.length - 1"/>
      </ng-container>
    </div>
  </div>
</div>
